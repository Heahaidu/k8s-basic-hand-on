# Kubernetes Ingress Debugging Journey ðŸ›

## Environment

- **OS:** Windows
- **Minikube Driver:** Docker
- **Addon:** Ingress (ingress-nginx)
- **Goal:** Access Kubernetes Dashboard via `http://dashboard1.com` using Ingress

---

## The Setup

### Ingress Configuration

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
  namespace: kubernetes-dashboard
spec:
  ingressClassName: nginx
  rules:
    - host: dashboard1.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: kubernetes-dashboard
                port:
                  number: 80
```

### Windows Hosts File

```
192.168.49.2 dashboard1.com
```

---

## The Problem

Accessing `http://dashboard1.com` in the browser returned **nothing**. No response, no error, just timeout.

---

## Debugging Steps

### 1. Checked Pods â€” âœ… All Running

All pods in `kubernetes-dashboard` namespace were healthy and running.

### 2. Checked Endpoints â€” âœ… Correct

Service endpoints were properly pointing to the dashboard pods.

### 3. Checked Ingress â€” âœ… Configured Correctly

```
NAME         CLASS   HOSTS            ADDRESS        PORTS   AGE
my-ingress   nginx   dashboard1.com   192.168.49.2   80      34m
```

Ingress was synced and assigned an address.

### 4. Checked Ingress Controller Logs â€” âœ… No Errors

NGINX reloaded successfully, no backend errors.

### 5. Tested with `minikube service` â€” âœ… Dashboard Accessible

Direct access to the service worked fine, confirming the app itself was healthy.

### 6. Tested Raw Connection to Minikube IP â€” âŒ Failed

```powershell
curl -v http://192.168.49.2
# No response at all
```

Windows could not reach `192.168.49.2` at all.

### 7. Inspected Ingress-NGINX Service â€” ðŸ’¡ Found the Clue

```
service/ingress-nginx-controller   NodePort   80:30822/TCP,443:30984/TCP
```

Service type was **NodePort** (port 30822), not **LoadBalancer** (port 80).

---

## Root Cause

Two issues combined:

**Issue 1 â€” NodePort:** The Ingress Controller was exposed on port `30822`, not port `80`. So `http://dashboard1.com` (port 80) had no one listening.

**Issue 2 â€” Docker Network Isolation:** Minikube with Docker driver creates an internal Docker network (`192.168.49.0/24`). **Windows cannot route to this network directly.** The IP `192.168.49.2` only exists inside Docker's virtual network, making it unreachable from the Windows host â€” regardless of the port.

```
Windows Host â†â€”â€”Ã—â€”â€”â†’ Docker Internal Network (192.168.49.0/24) â†â€”â€”â†’ Minikube
```

---

## The Fix

### Step 1 â€” Update Hosts File

```
# Changed from 192.168.49.2 to 127.0.0.1
127.0.0.1 dashboard1.com
```

### Step 2 â€” Run Minikube Tunnel

```bash
minikube tunnel
```

This creates a tunnel from `127.0.0.1` on Windows through to the Minikube cluster inside Docker.

```
Browser â†’ 127.0.0.1:80 â†’ minikube tunnel â†’ Docker Network â†’ Ingress Controller â†’ Dashboard Pod
```

### Result: âœ… `http://dashboard1.com` works!

---

## Lesson Learned

> When using Minikube with **Docker driver on Windows**, the Minikube IP (`192.168.49.2`) is **not directly accessible** from the host. Always use `minikube tunnel` and point to `127.0.0.1` instead.
>
> If using **VirtualBox** or **Hyper-V** driver, the Minikube IP would be directly reachable and this issue would not occur.

---

*Debugged with love and patience. February 10, 2026* ðŸ’€